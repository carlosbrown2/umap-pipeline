{
  "project": "UMAP News Pipeline",
  "branchName": "ralph/umap-news-pipeline",
  "description": "A pipeline that aggregates news articles, clusters them using UMAP + DBSCAN, and generates LLM summaries for human review",
  "userStories": [
    {
      "id": "US-001",
      "title": "Project setup and dependencies",
      "description": "As a developer, I need the project scaffolded with dependencies so I can build the pipeline.",
      "acceptanceCriteria": [
        "Python project with pyproject.toml or requirements.txt",
        "Dependencies: requests, beautifulsoup4, feedparser, sentence-transformers, umap-learn, scikit-learn, ollama, jinja2",
        "Basic project structure: src/, tests/, templates/, output/",
        "README with setup instructions",
        "Typecheck/lint passes (ruff configured)"
      ],
      "priority": 1,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-002",
      "title": "News source configuration",
      "description": "As a user, I want to configure which news sources to pull from so I can customize my news intake.",
      "acceptanceCriteria": [
        "Config file (YAML) for defining sources at config/sources.yaml",
        "Support RSS feed URLs with type: rss",
        "Support web scrape targets with type: scrape and CSS selectors",
        "Default config with 3-5 free sources (AP, Reuters RSS, BBC, NPR)",
        "Typecheck/lint passes"
      ],
      "priority": 2,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-003",
      "title": "RSS feed fetcher",
      "description": "As a developer, I need to fetch articles from RSS feeds so I can aggregate news content.",
      "acceptanceCriteria": [
        "Function fetch_rss(url) in src/umap_pipeline/fetchers/rss.py",
        "Use feedparser to parse RSS feeds",
        "Extract: title, link, published date, summary/description",
        "Handle fetch errors gracefully (timeout, invalid feed)",
        "Return list of Article dataclass instances",
        "Unit tests in tests/test_rss.py",
        "Typecheck/lint passes"
      ],
      "priority": 3,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-004",
      "title": "Web scraper module",
      "description": "As a developer, I need to scrape articles from web pages for sources without RSS.",
      "acceptanceCriteria": [
        "Function scrape_article(url, selectors) in src/umap_pipeline/fetchers/scraper.py",
        "Use BeautifulSoup to extract content",
        "Extract: title, body text, published date (if available)",
        "Add 1-2 second delay between requests",
        "Handle errors gracefully (404, timeout, missing elements)",
        "Unit tests with mocked responses in tests/test_scraper.py",
        "Typecheck/lint passes"
      ],
      "priority": 4,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-005",
      "title": "Article aggregator",
      "description": "As a developer, I need to combine articles from all sources into a unified dataset.",
      "acceptanceCriteria": [
        "Function aggregate_articles(config_path) in src/umap_pipeline/aggregator.py",
        "Load sources from config file",
        "Fetch from all RSS and scrape sources",
        "Deduplicate by URL",
        "Return list of Article objects with: id, title, text, url, source, date",
        "Typecheck/lint passes"
      ],
      "priority": 5,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-006",
      "title": "Text embedding with sentence-transformers",
      "description": "As a developer, I need to embed article text so I can cluster by semantic similarity.",
      "acceptanceCriteria": [
        "Function embed_articles(articles) in src/umap_pipeline/embedder.py",
        "Use sentence-transformers with all-MiniLM-L6-v2 model",
        "Embed article title + text combined",
        "Return numpy array of embeddings",
        "Handle empty or very short texts by using title only",
        "Typecheck/lint passes"
      ],
      "priority": 6,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-007",
      "title": "UMAP dimensionality reduction",
      "description": "As a developer, I need to reduce embedding dimensions so DBSCAN can cluster effectively.",
      "acceptanceCriteria": [
        "Function reduce_dimensions(embeddings, n_components=2) in src/umap_pipeline/reducer.py",
        "Apply UMAP with configurable n_neighbors and min_dist",
        "Return reduced coordinates as numpy array",
        "Typecheck/lint passes"
      ],
      "priority": 7,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-008",
      "title": "DBSCAN clustering",
      "description": "As a developer, I need to cluster the UMAP-reduced embeddings to identify topic groups.",
      "acceptanceCriteria": [
        "Function cluster_articles(reduced_embeddings, eps=0.5, min_samples=3) in src/umap_pipeline/clusterer.py",
        "Apply DBSCAN from scikit-learn",
        "Return cluster labels array (-1 for noise/outliers)",
        "Typecheck/lint passes"
      ],
      "priority": 8,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-009",
      "title": "Cluster summarization with Ollama",
      "description": "As a user, I want each cluster summarized so I can quickly understand the topic.",
      "acceptanceCriteria": [
        "Function summarize_cluster(articles, model='llama3') in src/umap_pipeline/summarizer.py",
        "Connect to local Ollama instance using ollama Python package",
        "Select up to 5 representative articles per cluster",
        "Prompt LLM to generate: topic label, 2-3 sentence summary, key themes",
        "Return ClusterSummary dataclass",
        "Handle Ollama connection errors with clear error message",
        "Typecheck/lint passes"
      ],
      "priority": 9,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-010",
      "title": "Static HTML report generator",
      "description": "As a user, I want results as an HTML report so I can review the news clusters easily.",
      "acceptanceCriteria": [
        "Jinja2 template at templates/report.html",
        "Function generate_report(clusters, output_path) in src/umap_pipeline/report.py",
        "Display each cluster with: summary, article count, list of article titles with links",
        "Include UMAP 2D scatter plot as embedded image (matplotlib)",
        "Include generation timestamp",
        "Output to output/report-YYYY-MM-DD.html",
        "Basic CSS styling for readability",
        "Typecheck/lint passes"
      ],
      "priority": 10,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-011",
      "title": "CLI entry point",
      "description": "As a user, I want to run the pipeline from the command line.",
      "acceptanceCriteria": [
        "CLI command: python -m umap_pipeline run",
        "Use argparse or click for CLI",
        "Optional flags: --config, --output-dir, --model",
        "Runs full pipeline: fetch → embed → UMAP → DBSCAN → summarize → report",
        "Prints progress to stdout",
        "Typecheck/lint passes"
      ],
      "priority": 11,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-012",
      "title": "Scheduled execution support",
      "description": "As a user, I want to schedule the pipeline to run automatically.",
      "acceptanceCriteria": [
        "Add Scheduling section to README with cron example",
        "Example: 0 8 * * * cd /path/to/project && python -m umap_pipeline run >> logs/pipeline.log 2>&1",
        "Create logs/ directory",
        "Pipeline runs non-interactively without prompts",
        "Typecheck/lint passes"
      ],
      "priority": 12,
      "passes": false,
      "notes": ""
    }
  ]
}
